{"source":"webpackJsonp([15],{\"c/7M\":function(a,t){},zML5:function(a,t,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=e(\"4YfN\"),l=e.n(r),s=e(\"0xDb\"),o=e(\"gyMJ\"),i=e(\"P9l9\"),n={components:{},data:function(){return{currentPage:1,queryParams:{page:1,page_size:10,type:1,lx:1,sort:\"\",sortord:\"\"},tableData:{},tableDataLoading:!1,chartDataLoading:!1,exportLoading:!1}},mounted:function(){this.getTableData(this.queryParams),this.getChartData(this.queryParams.lx)},methods:{getChartData:function(s){var n=this;this.chartDataLoading=!0,Object(o.d)({url:i.a,data:{lx:s,type:1,page:null,page_size:null,sort:null,sortord:null}}).then(function(a){n.chartDataLoading=!1;var t=a.data.list,r=[\"company\",\"radar\"],l=1,e=(t.map(function(a){var t=a.title.replace(/省|市/g,\"\"),e=a[r[s-1]];return l=Math.max(l,e),{name:t,value:e}}),Array(8).fill().map(function(a,t){return{start:Math.ceil(l*(t*(1/8))),end:Math.ceil(l*((t+1)*(1/8)))}}).reverse(),{title:{text:\"同名数量统计\",subtext:\"纯属虚构\",x:\"left\"},tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b}: {c} ({d}%)\"},legend:{},series:[{name:\"访问来源\",type:\"pie\",radius:[\"50%\",\"70%\"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:\"center\"},emphasis:{show:!0,textStyle:{fontSize:\"30\",fontWeight:\"bold\"}}},labelLine:{normal:{show:!1}},data:[{value:335,name:\"直接访问\"},{value:310,name:\"邮件营销\"},{value:234,name:\"联盟广告\"},{value:135,name:\"视频广告\"},{value:1548,name:\"搜索引擎\"}]}]});n.$echarts.init(n.$refs.chart1).setOption(e),n.$echarts.init(n.$refs.chart2).setOption(e)},function(a){})},getTableData:function(a){var e=this;this.tableDataLoading=!0,Object(o.d)({url:i.a,data:l()({},a,{lx:1})}).then(function(a){e.tableDataLoading=!1;var t=a.data;a.data.list.forEach(function(a){a.qxzb=s.a.p2int(a.company,t.company),a.p_company=s.a.p2int(a.company,a.p_company),a.p_radar=s.a.p2int(a.radar,a.p_radar),a.ldzb=s.a.p2int(a.radar,t.radar)}),e.tableData=t},function(a){})},onChangeStatRange:function(a){this.queryParams.type=a,this.currentPage=1,this.queryParams.page=1,this.getTableData(this.queryParams)},sortChange:function(a){this.currentPage=1,this.queryParams.page=1,this.queryParams.sortord=\"descending\"===a.order?\"desc\":\"asc\",this.queryParams.sort=a.prop,this.getTableData(this.queryParams)},handleSizeChange:function(a){this.queryParams.page_size=a,this.getTableData(this.queryParams)},handleCurrentChange:function(a){this.currentPage=a,this.queryParams.page=a,this.getTableData(this.queryParams)},exportExcel:function(a){var t=this;this.exportLoading=!0;var e=a.type;Object(o.d)({url:i.a,data:l()({},a,{page:null,page_size:null})}).then(function(a){t.exportLoading=!1,1===e&&s.a.getExcel([\"省份\",\"企业数\",\"占总企业数\",\"AI雷达数\",\"占总AI雷达数\"],[\"title\",\"company\",\"qxzb\",\"radar\",\"ldzb\"],a.data.list,\"省级企业统计\"),2===e&&s.a.getExcel([\"地级市\",\"所属省份\",\"企业数\",\"占总企业数\",\"占所属省份企业数\",\"AI雷达数\",\"占总AI雷达数\",\"占省份AI雷达数\"],[\"title\",\"province\",\"company\",\"qxzb\",\"p_company\",\"radar\",\"ldzb\",\"p_radar\"],a.data.list,\"市级企业统计\")},function(a){})}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{attrs:{id:\"overallArea\"}},[e(\"div\",{staticClass:\"page-title\"},[e(\"h2\",[e(\"span\",[t._v(\"行业分布 \")]),t._v(\" \"),e(\"el-popover\",{attrs:{trigger:\"hover\",placement:\"right\"}},[e(\"div\",[e(\"p\",[e(\"strong\",[t._v(\"企业数：\")]),t._v(\"所属行业（一级/二级）分类下开户的企业总数。数据截至昨日，每日更新一次\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占总企业数：\")]),t._v(\"所属行业（一级/二级）分类下企业数占总开户企业数百分比\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占一级分类企业数：\")]),t._v(\"所属二级分类下的企业数占所属一级分类下企业数的百分比\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"AI雷达数：\")]),t._v(\"所属行业（一级/二级）分类下销售的AI雷达总数。数据截至昨日，每日更新一次\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占总雷达数：\")]),t._v(\"所属行业（一级/二级）分类下销售的AI雷达数占总销售AI雷达数百分比\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占一级分类雷达数：\")]),t._v(\"所属二级（一级/二级）分类下销售的AI雷达数占所属一级分类销售AI雷达数的百分比\")])]),t._v(\" \"),e(\"i\",{staticClass:\"el-icon-question\",attrs:{slot:\"reference\"},slot:\"reference\"})])],1)]),t._v(\" \"),e(\"div\",{staticClass:\"filter-bar\"},[e(\"el-form\",{ref:\"form\",attrs:{size:\"small\",\"label-position\":\"left\",\"label-width\":\"80px\"}},[e(\"el-form-item\",{attrs:{label:\"统计指标\"}},[e(\"el-select\",{attrs:{placeholder:\"状态\"},on:{change:function(a){t.getChartData(t.queryParams.lx)}},model:{value:t.queryParams.lx,callback:function(a){t.$set(t.queryParams,\"lx\",a)},expression:\"queryParams.lx\"}},[e(\"el-option\",{attrs:{label:\"按开通企业数\",value:1}}),t._v(\" \"),e(\"el-option\",{attrs:{label:\"按AI雷达数\",value:2}})],1)],1)],1)],1),t._v(\" \"),e(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.chartDataLoading,expression:\"chartDataLoading\"}],staticClass:\"caver\"},[e(\"div\",{ref:\"chart1\",staticClass:\"chart\"}),t._v(\" \"),e(\"div\",{ref:\"chart2\",staticClass:\"chart\"})]),t._v(\" \"),e(\"div\",{staticClass:\"data-table-func clearfix\"},[e(\"el-button\",{staticClass:\"dcsh pull-right\",attrs:{loading:t.exportLoading},on:{click:function(a){t.exportExcel(t.queryParams)}}},[t._v(\"导出\")]),t._v(\" \"),e(\"div\",{staticClass:\"btn-group\"},[e(\"a\",{class:1==t.queryParams.type?\"active\":\"\",attrs:{href:\"javascript:void(0);\"},on:{click:function(a){t.onChangeStatRange(1)}}},[t._v(\"一级统计\")]),t._v(\" \"),e(\"a\",{class:2==t.queryParams.type?\"active\":\"\",attrs:{href:\"javascript:void(0);\"},on:{click:function(a){t.onChangeStatRange(2)}}},[t._v(\"二级统计\")])])],1),t._v(\" \"),e(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.tableDataLoading,expression:\"tableDataLoading\"}],staticClass:\"data-table\"},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:1===t.queryParams.type,expression:\"queryParams.type === 1\"}]},[e(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData.list,border:\"\",sortable:\"custom\"},on:{\"sort-change\":t.sortChange}},[e(\"el-table-column\",{attrs:{prop:\"title\",label:\"省份\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company\",label:\"企业数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"qxzb\",label:\"占总企业数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"radar\",label:\"AI雷达数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ldzb\",label:\"占总AI雷达数\",sortable:\"custom\"}})],1)],1),t._v(\" \"),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2===t.queryParams.type,expression:\"queryParams.type === 2\"}]},[e(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData.list,sortable:\"custom\",border:\"\"},on:{\"sort-change\":t.sortChange}},[e(\"el-table-column\",{attrs:{prop:\"title\",label:\"地级市\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"province\",label:\"所属省份\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company\",label:\"企业数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"qxzb\",label:\"占总企业数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"p_company\",label:\"占所属省份企业数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"radar\",label:\"AI雷达数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ldzb\",label:\"占总AI雷达数\",sortable:\"custom\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"p_radar\",label:\"占省份AI雷达数\",sortable:\"custom\"}})],1)],1)]),t._v(\" \"),e(\"div\",{staticClass:\"pager\"},[e(\"el-pagination\",{attrs:{layout:\"prev,pager,next,total,sizes\",\"current-page\":t.currentPage,\"page-sizes\":[10,20,50,100],\"page-size\":10,total:t.tableData.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var p=e(\"C7Lr\")(n,c,!1,function(a){e(\"c/7M\")},\"data-v-7a0be33e\",null);t.default=p.exports}});"}