{"source":"webpackJsonp([21],{gQ2c:function(a,t){},nVS5:function(a,t,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=e(\"4YfN\"),s=e.n(r),c=e(\"0xDb\"),i=e(\"gyMJ\"),n=e(\"P9l9\"),o={components:{},data:function(){return{currentPage:1,queryParams:{page:1,page_size:10,type_id:\"1\",statistics_id:1,sort:\"\",order:\"\",is_page:!0},tableData:{},tableDataLoading:!1,chartDataLoading:!1,exportLoading:!1}},created:function(){this.getTableData(),this.getChartData()},methods:{getChartDataType:function(a){this.queryParams.type_id=a,this.getTableData(),this.getChartData()},getChartData:function(){var o=this;this.queryParams.is_page=!1;var l=this.queryParams;this.chartDataLoading=!0,Object(i.b)(n.a,l).then(function(a){o.chartDataLoading=!1;var t=a.data.list,i=[\"company_num\",\"ai_radar_opened_num\"],n=1,e=t.map(function(a){var t=a.province.replace(/省|市|自治区|壮族自治区|维吾尔自治区|回族自治区/g,\"\"),e=a.company_num,r=a.ai_radar_opened_num,s=a[i[l.type_id-1]];return n=Math.max(n,s),{name:t,company_num:e,ai_radar_opened_num:r,value:s}}),r=Array(12).fill().map(function(a,t){return{start:Math.ceil(n*(t*(1/12))),end:Math.ceil(n*((t+1)*(1/12)))}}).reverse(),s={title:{text:[\"开通企业数区域分布图\",\"启用AI雷达数区域分布图\"][l.type_id-1],subtext:\"Data from \"+c.a.getToday(),x:\"center\"},tooltip:{trigger:\"item\"},visualMap:{x:\"left\",y:\"center\",splitList:r,text:[\"高\",\"低\"],color:[\"#d94e5d\",\"#eac736\",\"#50a3ba\"]},toolbox:{show:!0,orient:\"vertical\",x:\"right\",y:\"center\",feature:{mark:{show:!0},saveAsImage:{show:!1}}},series:[{name:[\"企业数\",\"AI雷达数\"][l.type_id-1],type:\"map\",map:\"china\",roam:!1,itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:e}]};o.$echarts.init(o.$refs.chart).setOption(s)},function(a){})},getTableData:function(){var e=this;this.tableDataLoading=!0,this.queryParams.is_page=!0;var a=this.queryParams;Object(i.b)(n.a,s()({},a)).then(function(a){e.tableDataLoading=!1;var t=a.data;a.data.list.forEach(function(a){a.qxzb=c.a.p2int(a.company,t.company),a.p_company=c.a.p2int(a.company,a.p_company),a.p_radar=c.a.p2int(a.radar,a.p_radar),a.ldzb=c.a.p2int(a.radar,t.radar)}),e.tableData=t},function(a){})},onChangeStatRange:function(a){this.queryParams.statistics_id=a,this.currentPage=1,this.queryParams.page=1,this.queryParams.order=\"\",this.queryParams.sort=\"\",this.getTableData()},sortChange:function(a){this.currentPage=1,this.queryParams.page=1,a.order?(this.queryParams.order=\"descending\"==a.order?\"desc\":\"asc\",this.queryParams.sort=a.prop):(this.queryParams.order=\"\",this.queryParams.sort=\"\"),this.getTableData()},handleSizeChange:function(a){this.queryParams.page_size=a,this.getTableData()},handleCurrentChange:function(a){this.currentPage=a,this.queryParams.page=a,this.getTableData()},exportExcel:function(a){this.queryParams.is_page=!1,location.href=n.N+\"?\"+c.a.jsonToUrlFmt(this.queryParams)}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{attrs:{id:\"overallArea\"}},[e(\"div\",{staticClass:\"page-title\"},[e(\"h2\",[e(\"span\",[t._v(\"区域分布 \")]),t._v(\" \"),e(\"el-popover\",{attrs:{trigger:\"hover\",placement:\"right\"}},[e(\"div\",[e(\"p\",[e(\"strong\",[t._v(\"开通企业数：\")]),t._v(\"省份/城市下开户的企业总数。（数据截至昨日，每日更新一次，以下同）\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占总企业数：\")]),t._v(\"省份/城市下开户的企业总数占总开户企业数百分比\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"启用AI雷达数：\")]),t._v(\"省份/城市下启用的AI雷达总数\")]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"占总启用AI雷达数：\")]),t._v(\"省份/城市下启用的AI雷达数占总销售AI雷达数百分比\")])]),t._v(\" \"),e(\"i\",{staticClass:\"el-icon-question\",attrs:{slot:\"reference\"},slot:\"reference\"})])],1)]),t._v(\" \"),e(\"div\",{staticClass:\"filter-bar\"},[e(\"el-form\",{ref:\"form\",attrs:{size:\"small\",\"label-position\":\"left\",\"label-width\":\"80px\"}},[e(\"el-form-item\",{attrs:{label:\"统计指标\"}},[e(\"el-select\",{attrs:{placeholder:\"状态\"},on:{change:t.getChartDataType},model:{value:t.queryParams.type_id,callback:function(a){t.$set(t.queryParams,\"type_id\",a)},expression:\"queryParams.type_id\"}},[e(\"el-option\",{attrs:{label:\"按开通企业数\",value:\"1\"}}),t._v(\" \"),e(\"el-option\",{attrs:{label:\"按启用AI雷达数\",value:\"2\"}})],1)],1)],1)],1),t._v(\" \"),e(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.chartDataLoading,expression:\"chartDataLoading\"}],staticClass:\"caver\"},[e(\"div\",{ref:\"chart\",staticClass:\"chart\"})]),t._v(\" \"),e(\"div\",{staticClass:\"data-table-func clearfix\"},[e(\"el-button\",{staticClass:\"dcsh pull-right\",attrs:{loading:t.exportLoading},on:{click:function(a){t.exportExcel(t.queryParams)}}},[t._v(\"导出\")]),t._v(\" \"),e(\"div\",[e(\"el-radio-group\",{attrs:{size:\"medium\"},on:{change:t.onChangeStatRange},model:{value:t.queryParams.statistics_id,callback:function(a){t.$set(t.queryParams,\"statistics_id\",a)},expression:\"queryParams.statistics_id\"}},[e(\"el-radio-button\",{attrs:{label:\"1\"}},[t._v(\"按省份统计\")]),t._v(\" \"),e(\"el-radio-button\",{attrs:{label:\"2\"}},[t._v(\"按地级市统计\")])],1)],1)],1),t._v(\" \"),e(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.tableDataLoading,expression:\"tableDataLoading\"}],staticClass:\"data-table\"},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==t.queryParams.statistics_id,expression:\"queryParams.statistics_id == 1\"}]},[e(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData.list,border:\"\",sortable:\"custom\",\"default-sort\":{prop:\"\",order:\"descending\"},\"max-height\":\"630\"},on:{\"sort-change\":t.sortChange}},[e(\"el-table-column\",{attrs:{prop:\"province\",label:\"省份\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company_num\",label:\"企业数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company_num_ratio\",label:\"占总企业数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ai_radar_opened_num\",label:\"启用AI雷达数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ai_radar_opened_ratio\",label:\"占总启用AI雷达数\"}})],1)],1),t._v(\" \"),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.queryParams.statistics_id,expression:\"queryParams.statistics_id == 2\"}]},[e(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData.list,border:\"\",sortable:\"custom\",\"default-sort\":{prop:\"\",order:\"descending\"},\"max-height\":\"630\"},on:{\"sort-change\":t.sortChange}},[e(\"el-table-column\",{attrs:{prop:\"city\",label:\"地级市\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"province\",label:\"所属省份\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company_num\",label:\"企业数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"company_num_ratio\",label:\"占总企业数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ai_radar_opened_num\",label:\"启用AI雷达数\"}}),t._v(\" \"),e(\"el-table-column\",{attrs:{prop:\"ai_radar_opened_ratio\",label:\"占总启用AI雷达数\"}})],1)],1)]),t._v(\" \"),e(\"div\",{staticClass:\"pager\"},[e(\"el-pagination\",{attrs:{layout:\"prev,pager,next,total,sizes\",\"current-page\":t.currentPage,\"page-sizes\":[10,20,50,100],\"page-size\":10,total:t.tableData.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var p=e(\"C7Lr\")(o,l,!1,function(a){e(\"gQ2c\")},\"data-v-6638c292\",null);t.default=p.exports}});"}