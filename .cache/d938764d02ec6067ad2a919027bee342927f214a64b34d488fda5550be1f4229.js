{"source":"webpackJsonp([18],{\"9jte\":function(e,t){},k9Eu:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=a(\"4YfN\"),r=a.n(n),s=a(\"HVJf\"),i=a(\"0uLg\"),l=a(\"0xDb\"),o=a(\"P9l9\"),c=l.a.getTime(14,!0),u=c.start_time,m=c.end_time,h={components:{GetTime:i.a},data:function(){return{currentPage:1,firstArgent:\"\",twoArgent:\"\",companyName:\"\",timeout:null,queryParams:{page_size:10,page:1,trade_start_date:u,trade_end_date:m,service_type:\"\",agent_id:\"\"}}},created:function(){this.getSearchAgentList({type:0}),this.getData()},methods:r()({},Object(s.b)([\"getSearchAgentList\",\"getSearchCompanyList\",\"getConsumeList\"]),Object(s.d)([\"setSearchAgentList\",\"setSearchCompanyList\"]),{resetPage:function(){this.currentPage=1,this.queryParams.page=1},queryFistAgent:function(e,t){this.querySearchAsync(e,t,this.searchAgentList)},queryTwoArgent:function(e,t){this.querySearchAsync(e,t,this.allAgentList)},queryCompanyName:function(e,t){this.querySearchAsync(e,t,this.searchCompanyList)},querySearchAsync:function(e,t,a){var n=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(n)},1e3*Math.random())},createStateFilter:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}},search:function(){this.resetPage(),this.getData()},getData:function(){this.getConsumeList(this.queryParams)},fistAgentHandleSelect:function(e){this.queryParams.top_agent_uid=e.uid||\"\"},twoArgentHandleSelect:function(e){console.log(\"消耗\",e),this.queryParams.agent_id=e.uid||\"\"},CompanyNameHandleSelect:function(e){this.queryParams.agent_id=e.company_id||\"\"},rankChange:function(e){this.queryParams.service_type=e},onChangeTimeRangeLine:function(e){this.queryParams.trade_start_date=e.start_time,this.queryParams.trade_end_date=e.end_time},exportExcel:function(){location.href=o.A+\"?\"+l.a.jsonToUrlFmt(this.queryParams)},handleSizeChange:function(e){this.resetPage(),this.queryParams.page_size=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.queryParams.page=e,this.getData()}}),computed:r()({},Object(s.c)([\"allAgentList\",\"searchCompanyList\",\"consumeList\"])),watch:{firstArgent:function(e){!e&&this.fistAgentHandleSelect(\"\")},twoArgent:function(e){!e&&this.twoArgentHandleSelect(\"\")},companyName:function(e){!e&&this.CompanyNameHandleSelect(\"\")}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"Tab\"},[a(\"el-form\",{ref:\"form\",attrs:{size:\"small\",\"label-position\":\"left\",\"label-width\":\"100px\"}},[a(\"div\",[a(\"div\",[a(\"el-form-item\",{attrs:{label:\"业务类型\"}},[a(\"el-select\",{on:{change:t.rankChange},model:{value:t.queryParams.service_type,callback:function(e){t.$set(t.queryParams,\"service_type\",e)},expression:\"queryParams.service_type\"}},[a(\"el-option\",{attrs:{label:\"全部\",value:\"\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"企业开户\",value:\"4\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"开通增值服务\",value:\"8\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"增加人员\",value:\"6\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"增加门店数\",value:\"9\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"增加人数和门店数\",value:\"10\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"续费\",value:\"5\"}}),t._v(\" \"),a(\"el-option\",{attrs:{label:\"系统回收\",value:\"3\"}})],1)],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"交易日期\"}},[a(\"GetTime\",{attrs:{showDay:!1,isclearable:!1},on:{changeTime:t.onChangeTimeRangeLine}})],1)],1),t._v(\" \"),a(\"div\",[a(\"el-form-item\",{attrs:{label:\"消耗主体\"}},[a(\"el-autocomplete\",{staticClass:\"inline-input\",attrs:{\"fetch-suggestions\":t.queryTwoArgent,placeholder:\"请输入消耗主体\",clearable:\"\"},on:{select:t.twoArgentHandleSelect},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:\"companyName\"}})],1),t._v(\" \"),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},nativeOn:{click:function(e){return t.search(e)}}},[t._v(\"查询\")])],1)],1)])]),t._v(\" \"),a(\"div\",{staticClass:\"tab\"},[a(\"div\",{staticClass:\"data-table-func text-right\"},[a(\"el-button\",{staticClass:\"dcsh\",attrs:{type:\"button\"},on:{click:t.exportExcel}},[t._v(\"导出\")])],1),t._v(\" \"),a(\"div\",{staticClass:\"data-table\"},[a(\"el-table\",{attrs:{data:t.consumeList.list,\"max-height\":\"630\",border:\"\"}},[a(\"el-table-column\",{attrs:{prop:\"agent_name\",label:\"消耗主体\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"service_type\",label:\"业务类型\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"obj_name\",label:\"企业名称\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"number\",label:\"开通雷达数\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"recharge_point\",label:\"消耗推点\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"trade_date\",label:\"交易日期\"}})],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"pager\"},[a(\"el-pagination\",{attrs:{layout:\"prev, pager, next, total, sizes\",\"current-page\":t.currentPage,\"page-sizes\":[10,20,50,100],\"page-size\":10,total:t.consumeList.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)])],1)])},staticRenderFns:[]};var p=a(\"C7Lr\")(h,g,!1,function(e){a(\"9jte\")},\"data-v-6a5b67d4\",null);t.default=p.exports}});"}