webpackJsonp([12],{"8Jgr":function(a,t){},lV3K:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("4YfN"),r=e.n(s),l=e("0uLg"),n=e("0xDb"),i=e("gyMJ"),o=e("P9l9"),_=n.a.getTime(14,!1),m=(_.start_time,_.end_time,{components:{GetTime:l.a},data:function(){var a=n.a.getTime(14);return{status:"",labelNames:[["日期","企业总数","新增企业数","总数较前一天","已上线小程序企业数","开通门店数","启用门店数"],["日期","开通AI雷达总数","新增开通","较前一天","启用AI雷达总数","新增启用","活跃用户数"],["日期","小程序用户总数","小程序新增用户数","总数较前一天","活跃用户数"]],exportTitle:["企业数趋势","AI雷达数趋势","小程序用户数趋势"],chartNames:[["新增企业数"],["新增开通","新增启用","活跃用户数"],["新增客户数","活跃用户数"]],currentPage:1,queryParams:{type_id:1,logdate_start:a.start_time,logdate_end:a.end_time,software_version:"",page:1,page_size:10,is_page:!0,level:1},baseData:{},baseDataLoading:!1,chartDataLoading:!1,tableData:[],tableDataLoading:!1,tableDataLoading2:!1,tableDataLoading3:!1,exportLoading:!1,value:"",myChart:null}},created:function(){this.getBaseData(""),this.getTrendDataForChart(),this.getTrendDataForTable()},mounted:function(){this.myChart=this.$echarts.init(this.$refs.chart)},methods:{getBaseData:function(){var t=this;this.baseDataLoading=!0,Object(i.b)(o.Y,this.queryParams).then(function(a){t.baseDataLoading=!1,t.baseData=a.data},function(a){})},selectChange:function(a){this.currentPage=1,this.queryParams.page=1,this.queryParams.software_version=a,this.getBaseData(),this.getTrendDataForChart(),this.getTrendDataForTable()},getTrendDataForTable:function(){var t=this;this.tableDataLoading=!0,this.tableDataLoading2=!0,this.tableDataLoading3=!0,this.queryParams.is_page=!0,Object(i.b)(o.X,r()({},this.queryParams)).then(function(a){t.tableDataLoading=!1,t.tableDataLoading2=!1,t.tableDataLoading3=!1,t.tableData=a.data},function(a){})},getTrendDataForChart:function(){var l=this;this.chartDataLoading=!0,this.queryParams.is_page=!1,Object(i.b)(o.X,r()({},this.queryParams)).then(function(a){l.chartDataLoading=!1;var t=a.data.list.length?a.data.list.reverse():[],e=l.queryParams.type_id,s=l.chartNames[e-1];console.log("name",s,e);var r={};1==e?r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:s},xAxis:[{boundaryGap:!1,type:"category",data:t.map(function(a){return a.date}),axisLabel:{rotate:30,interval:"auto"}}],yAxis:[{type:"value"}],series:[{smooth:!0,name:s,type:"line",data:t.map(function(a){return a.new_company_num}),itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}}}]}:2==e?r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:s},xAxis:[{boundaryGap:!1,type:"category",data:t.map(function(a){return a.date}),axisLabel:{rotate:30,interval:"auto"}}],yAxis:[{type:"value"}],series:[{smooth:!0,name:s[0],type:"line",data:t.map(function(a){return a.new_ai_radar_purchased_num}),itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}}},{smooth:!0,name:s[1],type:"line",data:t.map(function(a){return a.add_ai_radar_opened_num})},{smooth:!0,name:s[2],type:"line",data:t.map(function(a){return a.active_ai_radar_num})}]}:3==e&&(r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:s},xAxis:[{boundaryGap:!1,type:"category",data:t.map(function(a){return a.date}),axisLabel:{rotate:30,interval:"auto"}}],yAxis:[{type:"value"}],series:[{smooth:!0,name:s[0],type:"line",data:t.map(function(a){return a.new_small_program_user_num}),itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}}},{smooth:!0,name:s[1],type:"line",data:t.map(function(a){return a.active_small_program_user_num})}]}),l.myChart.setOption(r,!0)},function(a){})},switchType:function(a){this.currentPage=1,this.queryParams.page=1,this.queryParams.type_id=a,this.getTrendDataForChart(),this.getTrendDataForTable()},onChangeDayRange:function(a){this.onChangeTimeRange(n.a.getTime(a))},onChangeTimeRange:function(a){var t=a.start_time,e=a.end_time;n.a.getsjc(e)-n.a.getsjc(t)<32&&(this.queryParams.level=1),this.queryParams.logdate_start=t,this.queryParams.logdate_end=e,this.currentPage=1,this.queryParams.page=1,this.getTrendDataForChart(),this.getTrendDataForTable()},switchRange:function(a){var t=this.queryParams,e=t.logdate_start,s=t.logdate_end,r=n.a.getsjc(s)-n.a.getsjc(e);if(3==a&&r<32||2==a&&r<8)return n.a.toast("时间区间太短");this.queryParams.level=a,this.currentPage=1,this.queryParams.page=1,this.getTrendDataForChart(),this.getTrendDataForTable()},handleSizeChange:function(a){this.queryParams.page_size=a,this.getTrendDataForTable()},handleCurrentChange:function(a){this.currentPage=a,this.queryParams.page=a,this.getTrendDataForTable()},exportExcel:function(){this.queryParams.is_page=!1,location.href=o.W+"?"+n.a.jsonToUrlFmt(this.queryParams)}}}),d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"trend"}},[e("div",{staticClass:"page-title"},[e("h2",[t._v("\n        趋势分析\n        "),e("el-popover",{attrs:{trigger:"hover",placement:"right",width:"700"}},[e("div",[e("p",[e("strong",[t._v("企业数：")]),t._v("开通账号的企业中，状态为正常的企业数（状态为正常的企业，不包含审核中，审核失败，停用，注销）。")]),t._v(" "),e("p",[e("strong",[t._v("已上线小程序企业数：")]),t._v("状态为正常的企业中，已上线小程序的企业数量。")]),t._v(" "),e("p",[e("strong",[t._v("开通门店数：")]),t._v("门店版企业购买开通的门店总数（状态为正常的企业）。")]),t._v(" "),e("p",[e("strong",[t._v("启用门店数：")]),t._v("门店版企业购买门店后，启用的门店总数（状态为正常的企业）。")]),t._v(" "),e("p",[e("strong",[t._v("开通AI雷达数：")]),t._v("企业购买开通的AI雷达总数（状态为正常的企业）。")]),t._v(" "),e("p",[e("strong",[t._v("启用AI雷达数：")]),t._v("企业购买AI雷达账号后，实际为员工启用的雷达总数。")]),t._v(" "),e("p",[e("strong",[t._v("小程序用户数：")]),t._v("名片小程序累计用户总数。")]),t._v(" "),e("p",[e("strong",[t._v("AI雷达活跃用户数：")]),t._v("统计时段内，访问过AI雷达页面的用户数。")]),t._v(" "),e("p",[e("strong",[t._v("小程序活跃用户数：")]),t._v("统计时段内，访问过小程序页面的用户数。")]),t._v(" "),e("p",[e("strong",[t._v("今日新增：")]),t._v("今日当前总数-昨日总数。")]),t._v(" "),e("p",[e("strong",[t._v("昨日新增：")]),t._v("昨日总数-前日总数。")])]),t._v(" "),e("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticStyle:{"margin-bottom":"30px"}},[e("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"70px",size:"small"}},[e("el-form-item",{attrs:{label:"统计对象"}},[e("el-select",{on:{change:t.selectChange},model:{value:t.queryParams.software_version,callback:function(a){t.$set(t.queryParams,"software_version",a)},expression:"queryParams.software_version"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),e("el-option",{attrs:{label:"企业版",value:"0"}}),t._v(" "),e("el-option",{attrs:{label:"门店版",value:"2"}})],1)],1)],1)],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.baseDataLoading,expression:"baseDataLoading"}],staticClass:"data-stat"},[e("div",{staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("企业数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.company_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增 "),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.company_num_add))+" 家")])])]),t._v(" "),e("div",{staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("已上线小程序企业数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.online_small_program_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增  "),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.online_small_program_num_add))+"个")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.queryParams.software_version,expression:"queryParams.software_version==2"}],staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("启用门店总数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.store_used_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增 "),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.store_used_num_add))+"个")])])]),t._v(" "),e("div",{staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("开通AI雷达数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.ai_radar_purchased_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增"),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.ai_radar_purchased_num_add))+"个")])])]),t._v(" "),e("div",{staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("启用AI雷达数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.ai_radar_opened_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增"),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.ai_radar_opened_num_add))+"个")])])]),t._v(" "),e("div",{staticClass:"top-item"},[e("p",{staticClass:"kt"},[t._v("小程序用户总数")]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(t._f("numberWithCommas")(t.baseData.small_program_user_num)))]),t._v(" "),e("p",{staticClass:"xz"},[t._v("昨日新增"),e("span",[t._v(t._s(t._f("numberWithCommas")(t.baseData.small_program_user_num_add))+"个")])])])]),t._v(" "),e("div",{staticClass:"filter-bar"},[e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-radio-group",{on:{change:t.switchType},model:{value:t.queryParams.type_id,callback:function(a){t.$set(t.queryParams,"type_id",a)},expression:"queryParams.type_id"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("企业数趋势")]),t._v(" "),e("el-radio-button",{attrs:{label:"2"}},[t._v("AI雷达数趋势")]),t._v(" "),e("el-radio-button",{attrs:{label:"3"}},[t._v("小程序用户数趋势")])],1)],1),t._v(" "),e("div",{staticClass:"time-j-wrap"},[e("GetTime",{attrs:{isIncludeToday:!1},on:{getTime:t.onChangeDayRange,changeTime:t.onChangeTimeRange}})],1),t._v(" "),t._e()]),t._v(" "),e("div",{staticClass:"total-ts"},[2==t.queryParams.type_id?[t._v("统计时段内AI雷达新增开通：")]:[t._v("统计时段内共新增：")],t._v(" "),e("span",[t._v(t._s(t._f("numberWithCommas")(t.tableData.total_add_company||t.tableData.total_add_radar||t.tableData.total_add_user)))]),t._v(" "),1==t.queryParams.type_id?[t._v("家")]:[t._v("个 ")],t._v(" "),2==t.queryParams.type_id?[t._v("  新增启用："),e("span",[t._v(t._s(t._f("numberWithCommas")(t.tableData.total_add_radar_open)))]),t._v("个")]:t._e()],2),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chartDataLoading,expression:"chartDataLoading"}],staticClass:"caver"},[e("div",{ref:"chart",staticClass:"chart"})]),t._v(" "),e("div",{staticClass:"data-table-func text-right"},[e("el-button",{staticClass:"dcsh",attrs:{type:"button",loading:t.exportLoading},on:{click:t.exportExcel}},[t._v("导出")])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.queryParams.type_id,expression:"queryParams.type_id==1"},{name:"loading",rawName:"v-loading",value:t.tableDataLoading,expression:"tableDataLoading"}],staticClass:"data-table"},[e("el-table",{attrs:{data:t.tableData.list,border:"","max-height":"630"}},[e("el-table-column",{attrs:{prop:"date",label:t.labelNames[0][0]}}),t._v(" "),e("el-table-column",{attrs:{prop:"company_num",label:t.labelNames[0][1]}}),t._v(" "),e("el-table-column",{attrs:{prop:"new_company_num",label:t.labelNames[0][2]}}),t._v(" "),e("el-table-column",{attrs:{prop:"add_percentage",label:t.labelNames[0][3]}}),t._v(" "),e("el-table-column",{attrs:{prop:"online_small_program_num",label:t.labelNames[0][4]}}),t._v(" "),102==t.status?e("el-table-column",{attrs:{prop:"store_purchased_num",label:t.labelNames[0][5]}}):t._e(),t._v(" "),102==t.status?e("el-table-column",{attrs:{prop:"store_used_num",label:t.labelNames[0][6]}}):t._e()],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.queryParams.type_id,expression:"queryParams.type_id==2"},{name:"loading",rawName:"v-loading",value:t.tableDataLoading2,expression:"tableDataLoading2"}],staticClass:"data-table"},[e("el-table",{attrs:{data:t.tableData.list,border:"","max-height":"630"}},[e("el-table-column",{attrs:{prop:"date",label:t.labelNames[1][0]}}),t._v(" "),e("el-table-column",{attrs:{prop:"ai_radar_purchased_num",label:t.labelNames[1][1]}}),t._v(" "),e("el-table-column",{attrs:{prop:"new_ai_radar_purchased_num",label:t.labelNames[1][2]}}),t._v(" "),e("el-table-column",{attrs:{prop:"add_percentage",label:t.labelNames[1][3]}}),t._v(" "),e("el-table-column",{attrs:{prop:"ai_radar_opened_num",label:t.labelNames[1][4]}}),t._v(" "),e("el-table-column",{attrs:{prop:"add_ai_radar_opened_num",label:t.labelNames[1][5]}}),t._v(" "),e("el-table-column",{attrs:{prop:"active_ai_radar_num",label:t.labelNames[1][6]}})],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:3==t.queryParams.type_id,expression:"queryParams.type_id==3"},{name:"loading",rawName:"v-loading",value:t.tableDataLoading3,expression:"tableDataLoading3"}],staticClass:"data-table"},[e("el-table",{attrs:{data:t.tableData.list,border:"","max-height":"630"}},[e("el-table-column",{attrs:{prop:"date",label:t.labelNames[2][0]}}),t._v(" "),e("el-table-column",{attrs:{prop:"small_program_user_num",label:t.labelNames[2][1]}}),t._v(" "),e("el-table-column",{attrs:{prop:"new_small_program_user_num",label:t.labelNames[2][2]}}),t._v(" "),e("el-table-column",{attrs:{prop:"add_percentage",label:t.labelNames[2][3]}}),t._v(" "),e("el-table-column",{attrs:{prop:"active_small_program_user_num",label:t.labelNames[2][4]}})],1)],1),t._v(" "),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{layout:"prev, pager, next, total, sizes","current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":10,total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var u=e("C7Lr")(m,d,!1,function(a){e("8Jgr")},"data-v-b14eb61c",null);t.default=u.exports}});